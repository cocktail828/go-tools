syntax = "proto3";

package messagepb;

option go_package = "./;messagepb";

import "google/protobuf/any.proto";

enum MessageType {
  UPLOAD = 0;
  SEARCH = 1;
  QUERY = 2;
  UPDATE = 3;
  DELETE = 4;
  ANY = 100;
}

message Pair {
  string key = 1;
  string value = 2;
}

message Request {
  repeated string tags = 1;
  repeated Pair slices = 2;
  bytes data = 3;
  map<string, string> meta = 4;
  google.protobuf.Any extra = 5;
}

message Response {
  int32 code = 1;
  string message = 2;
  Request detail = 3;
}

service Versatile {
  rpc Upload(Request) returns (Response);
  rpc Search(Request) returns (Response);
  rpc Query(Request) returns (Response);
  rpc Update(Request) returns (Response);
  rpc Delete(Request) returns (Response);
  rpc Any(Request) returns (Response);
}